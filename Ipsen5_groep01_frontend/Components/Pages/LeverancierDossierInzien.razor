@page "/LeverancierDossierInzien"
@rendermode InteractiveServer
@using Models

<div class="decorative-bar"></div>

<div class="main">
    <table class="table">
        <thead>
        <tr class="table-row table-header">
            <th>Name</th>
            <th>Status</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
            @foreach (DocumentOpened documentOpened in documents)
            {
                <tr class="table-row data-row @(documentOpened.Opened ? "opened-row" : "")" style="background-color: @(GetRowColor(documentOpened.Document.Status))" @onclick="() => documentOpened.Opened = !documentOpened.Opened">
                    <td>@documentOpened.Document.Name</td>
                    <td>@documentOpened.Document.Status</td>
                    @if (documentOpened.Opened)
                    {
                        <td>&#x25B2;</td>
                    }
                    else
                    {
                        <td>&#x25BC;</td>
                    }
                </tr>
            }
        </tbody>
    </table>
</div>

@code {
    private List<DocumentOpened> documents = new List<DocumentOpened>
    {
        new DocumentOpened(new Document
        {
            Id = "1",
            Name = "Invoice001",
            UploadType = "Invoice",
            DocumentPath = "/documents/invoice001.pdf",
            Status = "Goedgekeurd",
            CreatedDate = DateTime.Now.AddDays(-10),
            UpdatedDate = DateTime.Now.AddDays(-5),
            CreatedBy = "John Doe"
        }),
        new DocumentOpened(new Document
        {
            Id = "2",
            Name = "Contract002",
            UploadType = "Contract",
            DocumentPath = "/documents/contract002.pdf",
            Status = "Wachten op beoordeling",
            CreatedDate = DateTime.Now.AddDays(-15),
            UpdatedDate = DateTime.Now.AddDays(-10),
            CreatedBy = "Jane Smith"
        }),
        new DocumentOpened(new Document
        {
            Id = "3",
            Name = "Proposal003",
            UploadType = "Proposal",
            DocumentPath = "/documents/proposal003.pdf",
            Status = "Afgekeurd",
            CreatedDate = DateTime.Now.AddDays(-20),
            UpdatedDate = DateTime.Now.AddDays(-15),
            CreatedBy = "Alice Johnson"
        }),
        new DocumentOpened(new Document
        {
            Id = "4",
            Name = "Delivery004",
            UploadType = "Delivery",
            DocumentPath = "/documents/delivery004.pdf",
            Status = "Nog op te leveren",
            CreatedDate = DateTime.Now.AddDays(-25),
            UpdatedDate = DateTime.Now.AddDays(-20),
            CreatedBy = "Bob Williams"
        })
    };

    private string GetRowColor(string status)
    {
        switch (status)
        {
            case "Wachten op beoordeling":
                return "#C3E6FF"; // Lichtblauw
            case "Afgekeurd":
                return "#FFB8B8"; // Lichtrood
            case "Nog op te leveren":
                return "#DBDBDB"; // Lichtgrijs
            case "Goedgekeurd":
                return "#92DD8c"; // Groen
            default:
                return "white";
        }
    }

    public class DocumentOpened
    {
        public Document Document { get; set; }
        public bool Opened { get; set; }

        public DocumentOpened(Document document)
        {
            Document = document;
            Opened = false;
        }
    }
}
